<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  
  <title>Reverting changes &mdash; GeoGig 1.2 User Manual</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,800italic,300,700,600,800,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cantarell:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../_static/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/offcanvas.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
      <link rel="index" title="Index" href="../genindex.html" />
      <link rel="search" title="Search" href="../search.html" />
      <link rel="top" title="GeoGig 1.2 User Manual" href="../index.html" />
      <link rel="up" title="Data and commits" href="index.html" />
      <link rel="next" title="Updating the repository data." href="updating.html" />
      <link rel="prev" title="Referencing a GeoGig element" href="referencing.html" />
</head>
<body class="data/reverting">
    <div id="blacktop"></div>
    <header id="masthead">
      <div class="navbar">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://geogig.org"><h1>GeoGig</h1></a>
          </div>
          <div class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="http://geogig.org/#install">Get Started</a></li>
              <li><a href="http://geogig.org/docs/index.html">Documentation</a></li>
              <li><a href="https://github.com/locationtech/geogig">On Github</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </header>

    <section class="subheading hidden-xs">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <p class="byline">A Tool for Geospatial Data Management</p>
          </div>
        </div>
      </div>
    </section>
    <a name="top"></a>

 <div id="main">
    <div class="wrap selfclear">
      <div id="content">
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
          <div class="col-md-8">
            <div class="row pull-right">
             <div class="visible-sm visible-xs" id="menu-btn">
                <button class="btn btn-blue btn-sm"type="button" data-toggle="offcanvas">
                  <span class="btn-text active">Menu &rarr;</span>
                  <span class="btn-back">&larr; Back</span>
                </button>
              </div>
            </div>
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoGig 1.2 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Data and commits</a> &raquo;</li>
  <li>Reverting changes</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="updating.html" title="Updating the repository data."
       accesskey="N">next</a>|</li>
  <li>
    <a href="referencing.html" title="Referencing a GeoGig element"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="reverting-changes">
<h1>Reverting changes<a class="headerlink" href="#reverting-changes" title="Permalink to this headline">¶</a></h1>
<p>Sometimes, the changes introduced by a given commit are not correct and you might want to undo them. This situation can be solved within GeoGig in different manners, depending on whether the commit is the most recent one or not and whether further changes have been made that are incompatible with undoing the changes in the problem commit.</p>
<p>If the commit to undo is the last one (is the current HEAD), then you can reset your head to the previous commit, by using the following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig reset --hard HEAD^1
</pre></div>
</div>
<p>This command rewinds the HEAD reference one commit. The <code class="docutils literal notranslate"><span class="pre">--hard</span></code> option indicates that it should also change the working tree to reflect the content of the new head commit, so you should take care and ensure that you do not have unstaged changes in the working three, as they will be overwritten.</p>
<p>Another way of undoing the latest commit is by using the <code class="docutils literal notranslate"><span class="pre">revert</span></code> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig revert HEAD
</pre></div>
</div>
<p>Instead of rewinding the HEAD and <em>erasing</em> the last command, this adds a new commit of top of the current HEAD, which has exactly the opposite changes to the commit passed (in this case, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>). The state of the HEAD of your repo will be the same as it was two commits ago, since you have added one commit and then another commit that cancels the first out. The state of your repository, though, will hold both the change and the undo in history.</p>
<p>You can revert not only the HEAD commit, but any other commit. This makes the <code class="docutils literal notranslate"><span class="pre">revert</span></code> command more interesting than <code class="docutils literal notranslate"><span class="pre">reset</span></code> if the problematic commit you want to undo is not the most recent. Using <code class="docutils literal notranslate"><span class="pre">reset</span></code> will cancel the commit, but also all the other commits after it, since <code class="docutils literal notranslate"><span class="pre">reset</span></code> operates rewinding the HEAD reference. The <code class="docutils literal notranslate"><span class="pre">revert</span></code> command is more flexible for this task.</p>
<p>Let’s assume you have the following log entries in your repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig log --oneline --abbrev-commit
adf66fe Edited wrong geometries
da1534a Added missing feature
159b517 Minor changes
6cda554 First import
</pre></div>
</div>
<p>Now let’s say that you want to undo the second-to-last commit (“Added missing feature”) when you found out that the missing feature the commit message refers to is not correct and should not be added. You can revert that commit by running the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig revert da1534a
</pre></div>
</div>
<p>Your HEAD will no longer contain the changes from the “Added missing feature” commit, but will maintain the edits incorporated by the “Edited wrong geometries” commit. Your log will now look like the following.</p>
<blockquote>
<div>$geogig log –oneline –abbrev-commit
4ff56da Revert ‘Added missing feature’
adf66fe Edited wrong geometries
da1534a Added missing feature
159b517 Minor changes
6cda554 First import</div></blockquote>
<p>It is not always possible to apply the revert operation as easily as in the case above. If further changes have been introduced in the features to revert, reverting might cause data losses. For this reason, if a feature affected by the commit to revert has been modified in another commit made after that one, GeoGig considers that to be a conflicting situation and will ask you to manually solve the conflict.</p>
<p>This situation is similar to the one found when merging or rebasing. For a conflicted feature, you will have different versions (the original one you want to revert to, the one created by the commit to revert, and the current one in HEAD) and you have to select one of them or manually combine them. Once you have done that, stage the feature and continue the revert operation by calling the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig revert --continue
</pre></div>
</div>
<p>To abort the <code class="docutils literal notranslate"><span class="pre">revert</span></code> operation after it has been stopped due to conflicts, use the <code class="docutils literal notranslate"><span class="pre">--abort</span></code> option.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$geogig revert --abort
</pre></div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="referencing.html" title="previous chapter">Referencing a GeoGig element</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="updating.html" title="next chapter">Updating the repository data.</a></div>
      </div>
      <p class="centered-text"><a href="#top"><img src="../_static/arrow_up.png" alt="back to top"/></a></p>
      </div><!-- /#content> -->
  <div id="sidebar" class="sidebar-offcanvas contrast col-sm-4 sidebar-offcanvas" id="sidebar" role="navigation">

    <div>
         <form id="quick-search" action="search.html" method="get" style="width: 100%;">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
          </fieldset>
        </form>


        <div class="btn-group-vertical" id="docs_toc">
          <a class="btn btn-default" href="/docs/">User Manual</a>
          <a class="btn btn-default" href="/technical/">Technical Manual</a>
          <a class="btn btn-default" href="/manpages/">Man Pages</a>
          <a class="btn btn-default" href="/workshop/">Workshop</a>
          <a class="btn btn-default" href="/upgrade/">Upgrading</a>
      </div>
        <div class="section continue_reading">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="referencing.html" title="previous chapter">Referencing a GeoGig element</a></li>
            <li>Next: <a href="updating.html" title="next chapter">Updating the repository data.</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/data/reverting.rst.txt">Show Source</a></li>
        </ul>
        </div>
        <div class="section">
          <h3>License</h3>
          <p>GeoGig is published using the <a href="https://github.com/locationtech/geogig/blob/master/LICENSE.txt">Eclipse Distribution License</a> (EDL). This is an open source initiative approved BSD-3 Clause license.</p>
          
          <p>This documentation is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. Page template includes work by the JQuery Foundation (<a href="https://github.com/jquery/jquery/blob/master/LICENSE.txt">MIT License</a>).</p>
        </div>

  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div>
</div>

</div><!-- /#main -->
    <footer>
      <div class="container">
        <div class="row">
          <div class=""><p class="repo-owner"><a href="https://github.com/locationtech/geogig">GeoGig</a> available on LocationTech. Website maintained by <a href="https://github.com/boundlessgeo"><img src="../_static/Boundless_Logo.png" alt="Boundless"></a></p></div>
        </div>
      </div>
    </footer>


  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/jquery-migrate-min.js"></script>
  <script type="text/javascript" src="../_static/bootstrap.min.js" ></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <script>
      $(document).ready(function() {

      $('[data-toggle=offcanvas]').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
      $('.list-group-item').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
    });
  </script>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3879903-19']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  </body>
</html>
